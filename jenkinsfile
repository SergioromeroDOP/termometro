pipeline {
    agent any

    stages {
        stage('Build') {
            branch_name = ${env.BRANCH_NAME}
            steps {
                echo 'Building..'
                script {
                    if (
                        (${branch_name} != "release-1.0" ) && 
                        (${branch_name} != "master" ) && 
                        (${branch_name} != "main" ) &&
                        (${branch_name} != "cicd" )
                    ) {
                        echo "Llamando trustedci.checkAndMerge()"
                        trustedci.checkAndMerge()
                    }
                    // ci.buildImages()
                    /*
                    deploy.Functions([
                        "project":  "sha-devops-dev-id",
                        "dir":      "mocks/functions/python/",
                    ])
                    */
                    /*
                    deploy.Worlflows([
                        "project":  "sha-devops-dev-id",
                        "dir":      "mocks/workflows/",
                        "location": "us-east1-b",
                    ])
                    */
                    
                    
                    // ptest.helloWorld()
                    // test.buildGo()
                }
            }
        }
        stage('Test') {
            steps {
                echo 'Testing..'
            }
        }
        stage('Deploy') {
            steps {
                echo 'Deploying....'
            }
        }
    }
}
